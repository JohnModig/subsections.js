<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Demo</title>
  <link rel="stylesheet" href="../src/subsections.css" />
  <link rel="stylesheet" href="demo.css" />
</head>
<body>

<main>

<h1>Single</h1>

<p><a href="#" data-section-id="section1">Toggle&nbsp;1</a></p>

<div class="demo">

<div id="section1" class="sub-section"><a href="#" class="close">Close</a><h2>Section1</h2></div>

</div>

<p>&nbsp;</p>
  
<p><a href="#" data-section-id="section2">Toggle&nbsp;2</a></p>

<div class="demo">

<div id="section2" class="sub-section"><a href="#" class="close">Close</a><h2>Section2</h2></div>

</div>

<p>&nbsp;</p>

<p><a href="#" data-section-id="section3">Toggle&nbsp;3</a></p>

<div class="demo">

<div id="section3" class="sub-section"><a href="#" class="close">Close</a><h2>Section3</h2></div>

</div>


</main>

<script src="../src/subsections.js"></script>

<script>
subSections.extend = function (link){

// Get the section
var section = document.getElementById(link.getAttribute('data-section-id'));

// Open or close?
var isOpen = section.className.indexOf('opened') >= 0;

// Close other open sections (make exclusive)
if(isOpen) {
  var sections = document.querySelectorAll('div.sub-section.opened');
  for(var i = 0; i < sections.length; i++) {
    if (sections[i] !== section) {
      subSections.hide(sections[i]);
      document.querySelector('a[data-section-id=' + sections[i].id + ']').firstElementChild.setAttribute('fill', closeColor);
    }
  }

};

// Attach event
(function () {
  var links = document.querySelectorAll('a[data-section-id]');
  for (var i = 0; i < links.length; i++) { 
    links[i].addEventListener('click', function(e) { subSections.extend(e.currentTarget); }
  }
})();
</script>

</body>
</html>
